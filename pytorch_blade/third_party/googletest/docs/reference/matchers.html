

<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Matchers Reference &mdash; BladeDISC 1.0.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../../../../_static/css/theme.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/css/theme.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/copybutton.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" /> 

</head>

<body>
    <header>
        <div class="container">
            <a class="site-nav-toggle hidden-lg-up"><i class="icon-menu"></i></a>
            <a class="site-title" href="../../../../../index.html">
                BladeDISC
            </a>
        </div>
    </header>


<div class="breadcrumbs-outer hidden-xs-down">
    <div class="container">
        















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="breadcrumbs">
    
      <li><a href="../../../../../index.html">Docs</a></li>
        
      <li>Matchers Reference</li>
    
    
      <li class="breadcrumbs-aside">
        
            
            <a href="../../../../../_sources/pytorch_blade/third_party/googletest/docs/reference/matchers.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>
</div>
    </div>
</div>
    <div class="main-outer">
        <div class="container">
            <div class="row">
                <div class="col-12 col-lg-3 site-nav">
                    
<div role="search">
    <form class="search" action="../../../../../search.html" method="get">
        <div class="icon-input">
            <input type="text" name="q" placeholder="Search" />
            <span class="icon-search"></span>
        </div>
        <input type="submit" value="Go" class="d-hidden" />
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
    </form>
</div>
                    <div class="site-nav-tree">
                        
                            
                            
                                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../README_.html">BladeDISC Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../README_.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../README_.html#api-quickview">API QuickView</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../README_.html#for-pytorch-users">For PyTorch Users</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../README_.html#setup-and-examples">Setup and Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../README_.html#publications">Publications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../README_.html#tutorials-and-documents-for-developers">Tutorials and Documents for Developers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../README_.html#how-to-contribute">How to Contribute</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../README_.html#faq">FAQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../README_.html#contact-us">Contact Us</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../docs/install_with_docker.html">Install with Docker</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../docs/install_with_docker.html#download-a-bladedisc-docker-image">Download a BladeDISC Docker Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../docs/install_with_docker.html#start-a-docker-container">Start a Docker Container</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../docs/build_from_source.html">Build from Source</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../docs/build_from_source.html#prerequisite">Prerequisite</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../docs/build_from_source.html#checkout-the-source">Checkout the Source</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../docs/build_from_source.html#building-bladedisc-for-tensorflow-users">Building BladeDISC for TensorFlow Users</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../docs/build_from_source.html#building-bladedisc-for-pytorch-users">Building BladeDISC for PyTorch Users</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../docs/quickstart.html">Quickstart for TensorFlow/PyTorch users</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../docs/quickstart.html#quickstart-for-tensorflow-users">Quickstart for TensorFlow Users</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../docs/quickstart.html#quickstart-for-pytorch-users">Quickstart for PyTorch Users</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../docs/contribution.html">How to Contribute</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../docs/contribution.html#local-development-environment">Local Development Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../docs/contribution.html#submit-a-pull-request-to-bladedisc">Submit a Pull Request to BladeDISC</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../docs/developers/index.html">Documentation for Developers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../docs/developers/pass_pipeline.html">Tutorial: A Walkthough of the BladeDISC Pass Pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../docs/developers/runtime_abstraction_layer.html">Runtime Abstraction Layer Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../docs/developers/bladedisc_torch_overview.html">BladeDISC Torch Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../docs/developers/torch_add_a_new_converter.html">Tutorial: How to add the support of a new Torch Op</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../docs/tutorials/index.html">Tutorials on Example Use Cases</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../docs/tutorials/tensorflow_inference_and_training.html">Use case of TensorFlow Inference and Training</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../docs/tutorials/torch_bert_inference.html">Use case of PyTorch Inference</a></li>
</ul>
</li>
</ul>

                            
                        
                    </div>
                </div>
                <div class="col-12 col-lg-9">
                    <div class="document">
                        
                            
  <div class="section" id="matchers-reference">
<h1>Matchers Reference<a class="headerlink" href="#matchers-reference" title="Permalink to this headline">¶</a></h1>
<p>A <strong>matcher</strong> matches a <em>single</em> argument. You can use it inside <code class="docutils literal notranslate"><span class="pre">ON_CALL()</span></code> or
<code class="docutils literal notranslate"><span class="pre">EXPECT_CALL()</span></code>, or use it to validate a value directly using two macros:</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="left">Macro</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>EXPECT_THAT(actual_value, matcher)</code></td>
<td align="left">Asserts that <code>actual_value</code> matches <code>matcher</code>.</td>
</tr>
<tr>
<td align="left"><code>ASSERT_THAT(actual_value, matcher)</code></td>
<td align="left">The same as <code>EXPECT_THAT(actual_value, matcher)</code>, except that it generates a <strong>fatal</strong> failure.</td>
</tr>
</tbody>
</table><p>{: .callout .note}
<strong>Note:</strong> Although equality matching via <code class="docutils literal notranslate"><span class="pre">EXPECT_THAT(actual_value,</span> <span class="pre">expected_value)</span></code> is supported, prefer to make the comparison explicit via
<code class="docutils literal notranslate"><span class="pre">EXPECT_THAT(actual_value,</span> <span class="pre">Eq(expected_value))</span></code> or <code class="docutils literal notranslate"><span class="pre">EXPECT_EQ(actual_value,</span> <span class="pre">expected_value)</span></code>.</p>
<p>Built-in matchers (where <code class="docutils literal notranslate"><span class="pre">argument</span></code> is the function argument, e.g.
<code class="docutils literal notranslate"><span class="pre">actual_value</span></code> in the example above, or when used in the context of
<code class="docutils literal notranslate"><span class="pre">EXPECT_CALL(mock_object,</span> <span class="pre">method(matchers))</span></code>, the arguments of <code class="docutils literal notranslate"><span class="pre">method</span></code>) are
divided into several categories. All matchers are defined in the <code class="docutils literal notranslate"><span class="pre">::testing</span></code>
namespace unless otherwise noted.</p>
<div class="section" id="wildcard">
<h2>Wildcard<a class="headerlink" href="#wildcard" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<thead>
<tr>
<th align="left">Matcher</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>_</code></td>
<td align="left"><code>argument</code> can be any value of the correct type.</td>
</tr>
<tr>
<td align="left"><code>A&lt;type&gt;()</code> or <code>An&lt;type&gt;()</code></td>
<td align="left"><code>argument</code> can be any value of type <code>type</code>.</td>
</tr>
</tbody>
</table></div>
<div class="section" id="generic-comparison">
<h2>Generic Comparison<a class="headerlink" href="#generic-comparison" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<thead>
<tr>
<th align="left">Matcher</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>Eq(value)</code> or <code>value</code></td>
<td align="left"><code>argument == value</code></td>
</tr>
<tr>
<td align="left"><code>Ge(value)</code></td>
<td align="left"><code>argument &gt;= value</code></td>
</tr>
<tr>
<td align="left"><code>Gt(value)</code></td>
<td align="left"><code>argument &gt; value</code></td>
</tr>
<tr>
<td align="left"><code>Le(value)</code></td>
<td align="left"><code>argument &lt;= value</code></td>
</tr>
<tr>
<td align="left"><code>Lt(value)</code></td>
<td align="left"><code>argument &lt; value</code></td>
</tr>
<tr>
<td align="left"><code>Ne(value)</code></td>
<td align="left"><code>argument != value</code></td>
</tr>
<tr>
<td align="left"><code>IsFalse()</code></td>
<td align="left"><code>argument</code> evaluates to <code>false</code> in a Boolean context.</td>
</tr>
<tr>
<td align="left"><code>IsTrue()</code></td>
<td align="left"><code>argument</code> evaluates to <code>true</code> in a Boolean context.</td>
</tr>
<tr>
<td align="left"><code>IsNull()</code></td>
<td align="left"><code>argument</code> is a <code>NULL</code> pointer (raw or smart).</td>
</tr>
<tr>
<td align="left"><code>NotNull()</code></td>
<td align="left"><code>argument</code> is a non-null pointer (raw or smart).</td>
</tr>
<tr>
<td align="left"><code>Optional(m)</code></td>
<td align="left"><code>argument</code> is <code>optional&lt;&gt;</code> that contains a value matching <code>m</code>. (For testing whether an <code>optional&lt;&gt;</code> is set, check for equality with <code>nullopt</code>. You may need to use <code>Eq(nullopt)</code> if the inner type doesn't have <code>==</code>.)</td>
</tr>
<tr>
<td align="left"><code>VariantWith&lt;T&gt;(m)</code></td>
<td align="left"><code>argument</code> is <code>variant&lt;&gt;</code> that holds the alternative of type T with a value matching <code>m</code>.</td>
</tr>
<tr>
<td align="left"><code>Ref(variable)</code></td>
<td align="left"><code>argument</code> is a reference to <code>variable</code>.</td>
</tr>
<tr>
<td align="left"><code>TypedEq&lt;type&gt;(value)</code></td>
<td align="left"><code>argument</code> has type <code>type</code> and is equal to <code>value</code>. You may need to use this instead of <code>Eq(value)</code> when the mock function is overloaded.</td>
</tr>
</tbody>
</table><p>Except <code class="docutils literal notranslate"><span class="pre">Ref()</span></code>, these matchers make a <em>copy</em> of <code class="docutils literal notranslate"><span class="pre">value</span></code> in case it’s modified or
destructed later. If the compiler complains that <code class="docutils literal notranslate"><span class="pre">value</span></code> doesn’t have a public
copy constructor, try wrap it in <code class="docutils literal notranslate"><span class="pre">std::ref()</span></code>, e.g.
<code class="docutils literal notranslate"><span class="pre">Eq(std::ref(non_copyable_value))</span></code>. If you do that, make sure
<code class="docutils literal notranslate"><span class="pre">non_copyable_value</span></code> is not changed afterwards, or the meaning of your matcher
will be changed.</p>
<p><code class="docutils literal notranslate"><span class="pre">IsTrue</span></code> and <code class="docutils literal notranslate"><span class="pre">IsFalse</span></code> are useful when you need to use a matcher, or for types
that can be explicitly converted to Boolean, but are not implicitly converted to
Boolean. In other cases, you can use the basic
EXPECT_TRUE and EXPECT_FALSE assertions.</p>
</div>
<div class="section" id="floating-point-matchers-fpmatchers">
<h2>Floating-Point Matchers {#FpMatchers}<a class="headerlink" href="#floating-point-matchers-fpmatchers" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<thead>
<tr>
<th align="left">Matcher</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>DoubleEq(a_double)</code></td>
<td align="left"><code>argument</code> is a <code>double</code> value approximately equal to <code>a_double</code>, treating two NaNs as unequal.</td>
</tr>
<tr>
<td align="left"><code>FloatEq(a_float)</code></td>
<td align="left"><code>argument</code> is a <code>float</code> value approximately equal to <code>a_float</code>, treating two NaNs as unequal.</td>
</tr>
<tr>
<td align="left"><code>NanSensitiveDoubleEq(a_double)</code></td>
<td align="left"><code>argument</code> is a <code>double</code> value approximately equal to <code>a_double</code>, treating two NaNs as equal.</td>
</tr>
<tr>
<td align="left"><code>NanSensitiveFloatEq(a_float)</code></td>
<td align="left"><code>argument</code> is a <code>float</code> value approximately equal to <code>a_float</code>, treating two NaNs as equal.</td>
</tr>
<tr>
<td align="left"><code>IsNan()</code></td>
<td align="left"><code>argument</code> is any floating-point type with a NaN value.</td>
</tr>
</tbody>
</table><p>The above matchers use ULP-based comparison (the same as used in googletest).
They automatically pick a reasonable error bound based on the absolute value of
the expected value. <code class="docutils literal notranslate"><span class="pre">DoubleEq()</span></code> and <code class="docutils literal notranslate"><span class="pre">FloatEq()</span></code> conform to the IEEE standard,
which requires comparing two NaNs for equality to return false. The
<code class="docutils literal notranslate"><span class="pre">NanSensitive*</span></code> version instead treats two NaNs as equal, which is often what a
user wants.</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="left">Matcher</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>DoubleNear(a_double, max_abs_error)</code></td>
<td align="left"><code>argument</code> is a <code>double</code> value close to <code>a_double</code> (absolute error &lt;= <code>max_abs_error</code>), treating two NaNs as unequal.</td>
</tr>
<tr>
<td align="left"><code>FloatNear(a_float, max_abs_error)</code></td>
<td align="left"><code>argument</code> is a <code>float</code> value close to <code>a_float</code> (absolute error &lt;= <code>max_abs_error</code>), treating two NaNs as unequal.</td>
</tr>
<tr>
<td align="left"><code>NanSensitiveDoubleNear(a_double, max_abs_error)</code></td>
<td align="left"><code>argument</code> is a <code>double</code> value close to <code>a_double</code> (absolute error &lt;= <code>max_abs_error</code>), treating two NaNs as equal.</td>
</tr>
<tr>
<td align="left"><code>NanSensitiveFloatNear(a_float, max_abs_error)</code></td>
<td align="left"><code>argument</code> is a <code>float</code> value close to <code>a_float</code> (absolute error &lt;= <code>max_abs_error</code>), treating two NaNs as equal.</td>
</tr>
</tbody>
</table></div>
<div class="section" id="string-matchers">
<h2>String Matchers<a class="headerlink" href="#string-matchers" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">argument</span></code> can be either a C string or a C++ string object:</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="left">Matcher</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>ContainsRegex(string)</code></td>
<td align="left"><code>argument</code> matches the given regular expression.</td>
</tr>
<tr>
<td align="left"><code>EndsWith(suffix)</code></td>
<td align="left"><code>argument</code> ends with string <code>suffix</code>.</td>
</tr>
<tr>
<td align="left"><code>HasSubstr(string)</code></td>
<td align="left"><code>argument</code> contains <code>string</code> as a sub-string.</td>
</tr>
<tr>
<td align="left"><code>IsEmpty()</code></td>
<td align="left"><code>argument</code> is an empty string.</td>
</tr>
<tr>
<td align="left"><code>MatchesRegex(string)</code></td>
<td align="left"><code>argument</code> matches the given regular expression with the match starting at the first character and ending at the last character.</td>
</tr>
<tr>
<td align="left"><code>StartsWith(prefix)</code></td>
<td align="left"><code>argument</code> starts with string <code>prefix</code>.</td>
</tr>
<tr>
<td align="left"><code>StrCaseEq(string)</code></td>
<td align="left"><code>argument</code> is equal to <code>string</code>, ignoring case.</td>
</tr>
<tr>
<td align="left"><code>StrCaseNe(string)</code></td>
<td align="left"><code>argument</code> is not equal to <code>string</code>, ignoring case.</td>
</tr>
<tr>
<td align="left"><code>StrEq(string)</code></td>
<td align="left"><code>argument</code> is equal to <code>string</code>.</td>
</tr>
<tr>
<td align="left"><code>StrNe(string)</code></td>
<td align="left"><code>argument</code> is not equal to <code>string</code>.</td>
</tr>
<tr>
<td align="left"><code>WhenBase64Unescaped(m)</code></td>
<td align="left"><code>argument</code> is a base-64 escaped string whose unescaped string matches <code>m</code>.</td>
</tr>
</tbody>
</table><p><code class="docutils literal notranslate"><span class="pre">ContainsRegex()</span></code> and <code class="docutils literal notranslate"><span class="pre">MatchesRegex()</span></code> take ownership of the <code class="docutils literal notranslate"><span class="pre">RE</span></code> object. They
use the regular expression syntax defined
<a class="reference internal" href="../advanced.html#regular-expression-syntax"><span class="std std-ref">here</span></a>. All of these matchers, except
<code class="docutils literal notranslate"><span class="pre">ContainsRegex()</span></code> and <code class="docutils literal notranslate"><span class="pre">MatchesRegex()</span></code> work for wide strings as well.</p>
</div>
<div class="section" id="container-matchers">
<h2>Container Matchers<a class="headerlink" href="#container-matchers" title="Permalink to this headline">¶</a></h2>
<p>Most STL-style containers support <code class="docutils literal notranslate"><span class="pre">==</span></code>, so you can use <code class="docutils literal notranslate"><span class="pre">Eq(expected_container)</span></code>
or simply <code class="docutils literal notranslate"><span class="pre">expected_container</span></code> to match a container exactly. If you want to
write the elements in-line, match them more flexibly, or get more informative
messages, you can use:</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="left">Matcher</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>BeginEndDistanceIs(m)</code></td>
<td align="left"><code>argument</code> is a container whose <code>begin()</code> and <code>end()</code> iterators are separated by a number of increments matching <code>m</code>. E.g. <code>BeginEndDistanceIs(2)</code> or <code>BeginEndDistanceIs(Lt(2))</code>. For containers that define a <code>size()</code> method, <code>SizeIs(m)</code> may be more efficient.</td>
</tr>
<tr>
<td align="left"><code>ContainerEq(container)</code></td>
<td align="left">The same as <code>Eq(container)</code> except that the failure message also includes which elements are in one container but not the other.</td>
</tr>
<tr>
<td align="left"><code>Contains(e)</code></td>
<td align="left"><code>argument</code> contains an element that matches <code>e</code>, which can be either a value or a matcher.</td>
</tr>
<tr>
<td align="left"><code>Contains(e).Times(n)</code></td>
<td align="left"><code>argument</code> contains elements that match <code>e</code>, which can be either a value or a matcher, and the number of matches is <code>n</code>, which can be either a value or a matcher. Unlike the plain <code>Contains</code> and <code>Each</code> this allows to check for arbitrary occurrences including testing for absence with <code>Contains(e).Times(0)</code>.</td>
</tr>
<tr>
<td align="left"><code>Each(e)</code></td>
<td align="left"><code>argument</code> is a container where <em>every</em> element matches <code>e</code>, which can be either a value or a matcher.</td>
</tr>
<tr>
<td align="left"><code>ElementsAre(e0, e1, ..., en)</code></td>
<td align="left"><code>argument</code> has <code>n + 1</code> elements, where the <em>i</em>-th element matches <code>ei</code>, which can be a value or a matcher.</td>
</tr>
<tr>
<td align="left"><code>ElementsAreArray({e0, e1, ..., en})</code>, <code>ElementsAreArray(a_container)</code>, <code>ElementsAreArray(begin, end)</code>, <code>ElementsAreArray(array)</code>, or <code>ElementsAreArray(array, count)</code></td>
<td align="left">The same as <code>ElementsAre()</code> except that the expected element values/matchers come from an initializer list, STL-style container, iterator range, or C-style array.</td>
</tr>
<tr>
<td align="left"><code>IsEmpty()</code></td>
<td align="left"><code>argument</code> is an empty container (<code>container.empty()</code>).</td>
</tr>
<tr>
<td align="left"><code>IsSubsetOf({e0, e1, ..., en})</code>, <code>IsSubsetOf(a_container)</code>, <code>IsSubsetOf(begin, end)</code>, <code>IsSubsetOf(array)</code>, or <code>IsSubsetOf(array, count)</code></td>
<td align="left"><code>argument</code> matches <code>UnorderedElementsAre(x0, x1, ..., xk)</code> for some subset <code>{x0, x1, ..., xk}</code> of the expected matchers.</td>
</tr>
<tr>
<td align="left"><code>IsSupersetOf({e0, e1, ..., en})</code>, <code>IsSupersetOf(a_container)</code>, <code>IsSupersetOf(begin, end)</code>, <code>IsSupersetOf(array)</code>, or <code>IsSupersetOf(array, count)</code></td>
<td align="left">Some subset of <code>argument</code> matches <code>UnorderedElementsAre(</code>expected matchers<code>)</code>.</td>
</tr>
<tr>
<td align="left"><code>Pointwise(m, container)</code>, <code>Pointwise(m, {e0, e1, ..., en})</code></td>
<td align="left"><code>argument</code> contains the same number of elements as in <code>container</code>, and for all i, (the i-th element in <code>argument</code>, the i-th element in <code>container</code>) match <code>m</code>, which is a matcher on 2-tuples. E.g. <code>Pointwise(Le(), upper_bounds)</code> verifies that each element in <code>argument</code> doesn't exceed the corresponding element in <code>upper_bounds</code>. See more detail below.</td>
</tr>
<tr>
<td align="left"><code>SizeIs(m)</code></td>
<td align="left"><code>argument</code> is a container whose size matches <code>m</code>. E.g. <code>SizeIs(2)</code> or <code>SizeIs(Lt(2))</code>.</td>
</tr>
<tr>
<td align="left"><code>UnorderedElementsAre(e0, e1, ..., en)</code></td>
<td align="left"><code>argument</code> has <code>n + 1</code> elements, and under <em>some</em> permutation of the elements, each element matches an <code>ei</code> (for a different <code>i</code>), which can be a value or a matcher.</td>
</tr>
<tr>
<td align="left"><code>UnorderedElementsAreArray({e0, e1, ..., en})</code>, <code>UnorderedElementsAreArray(a_container)</code>, <code>UnorderedElementsAreArray(begin, end)</code>, <code>UnorderedElementsAreArray(array)</code>, or <code>UnorderedElementsAreArray(array, count)</code></td>
<td align="left">The same as <code>UnorderedElementsAre()</code> except that the expected element values/matchers come from an initializer list, STL-style container, iterator range, or C-style array.</td>
</tr>
<tr>
<td align="left"><code>UnorderedPointwise(m, container)</code>, <code>UnorderedPointwise(m, {e0, e1, ..., en})</code></td>
<td align="left">Like <code>Pointwise(m, container)</code>, but ignores the order of elements.</td>
</tr>
<tr>
<td align="left"><code>WhenSorted(m)</code></td>
<td align="left">When <code>argument</code> is sorted using the <code>&lt;</code> operator, it matches container matcher <code>m</code>. E.g. <code>WhenSorted(ElementsAre(1, 2, 3))</code> verifies that <code>argument</code> contains elements 1, 2, and 3, ignoring order.</td>
</tr>
<tr>
<td align="left"><code>WhenSortedBy(comparator, m)</code></td>
<td align="left">The same as <code>WhenSorted(m)</code>, except that the given comparator instead of <code>&lt;</code> is used to sort <code>argument</code>. E.g. <code>WhenSortedBy(std::greater(), ElementsAre(3, 2, 1))</code>.</td>
</tr>
</tbody>
</table><p><strong>Notes:</strong></p>
<ul>
<li><p>These matchers can also match:</p>
<ol class="simple">
<li><p>a native array passed by reference (e.g. in <code class="docutils literal notranslate"><span class="pre">Foo(const</span> <span class="pre">int</span> <span class="pre">(&amp;a)[5])</span></code>),
and</p></li>
<li><p>an array passed as a pointer and a count (e.g. in <code class="docutils literal notranslate"><span class="pre">Bar(const</span> <span class="pre">T*</span> <span class="pre">buffer,</span> <span class="pre">int</span> <span class="pre">len)</span></code> – see <a class="reference external" href="#MultiArgMatchers">Multi-argument Matchers</a>).</p></li>
</ol>
</li>
<li><p>The array being matched may be multi-dimensional (i.e. its elements can be
arrays).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m</span></code> in <code class="docutils literal notranslate"><span class="pre">Pointwise(m,</span> <span class="pre">...)</span></code> and <code class="docutils literal notranslate"><span class="pre">UnorderedPointwise(m,</span> <span class="pre">...)</span></code> should be a
matcher for <code class="docutils literal notranslate"><span class="pre">::std::tuple&lt;T,</span> <span class="pre">U&gt;</span></code> where <code class="docutils literal notranslate"><span class="pre">T</span></code> and <code class="docutils literal notranslate"><span class="pre">U</span></code> are the element type of
the actual container and the expected container, respectively. For example,
to compare two <code class="docutils literal notranslate"><span class="pre">Foo</span></code> containers where <code class="docutils literal notranslate"><span class="pre">Foo</span></code> doesn’t support <code class="docutils literal notranslate"><span class="pre">operator==</span></code>,
one might write:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">MATCHER</span><span class="p">(</span><span class="n">FooEq</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="n">std</span><span class="o">::</span><span class="n">get</span><span class="o">&lt;</span><span class="mi">0</span><span class="o">&gt;</span><span class="p">(</span><span class="n">arg</span><span class="p">).</span><span class="n">Equals</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">get</span><span class="o">&lt;</span><span class="mi">1</span><span class="o">&gt;</span><span class="p">(</span><span class="n">arg</span><span class="p">));</span>
<span class="p">}</span>
<span class="p">...</span>
<span class="n">EXPECT_THAT</span><span class="p">(</span><span class="n">actual_foos</span><span class="p">,</span> <span class="n">Pointwise</span><span class="p">(</span><span class="n">FooEq</span><span class="p">(),</span> <span class="n">expected_foos</span><span class="p">));</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="member-matchers">
<h2>Member Matchers<a class="headerlink" href="#member-matchers" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<thead>
<tr>
<th align="left">Matcher</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>Field(&amp;class::field, m)</code></td>
<td align="left"><code>argument.field</code> (or <code>argument-&gt;field</code> when <code>argument</code> is a plain pointer) matches matcher <code>m</code>, where <code>argument</code> is an object of type <em>class</em>.</td>
</tr>
<tr>
<td align="left"><code>Field(field_name, &amp;class::field, m)</code></td>
<td align="left">The same as the two-parameter version, but provides a better error message.</td>
</tr>
<tr>
<td align="left"><code>Key(e)</code></td>
<td align="left"><code>argument.first</code> matches <code>e</code>, which can be either a value or a matcher. E.g. <code>Contains(Key(Le(5)))</code> can verify that a <code>map</code> contains a key <code>&lt;= 5</code>.</td>
</tr>
<tr>
<td align="left"><code>Pair(m1, m2)</code></td>
<td align="left"><code>argument</code> is an <code>std::pair</code> whose <code>first</code> field matches <code>m1</code> and <code>second</code> field matches <code>m2</code>.</td>
</tr>
<tr>
<td align="left"><code>FieldsAre(m...)</code></td>
<td align="left"><code>argument</code> is a compatible object where each field matches piecewise with the matchers <code>m...</code>. A compatible object is any that supports the <code>std::tuple_size&lt;Obj&gt;</code>+<code>get&lt;I&gt;(obj)</code> protocol. In C++17 and up this also supports types compatible with structured bindings, like aggregates.</td>
</tr>
<tr>
<td align="left"><code>Property(&amp;class::property, m)</code></td>
<td align="left"><code>argument.property()</code> (or <code>argument-&gt;property()</code> when <code>argument</code> is a plain pointer) matches matcher <code>m</code>, where <code>argument</code> is an object of type <em>class</em>. The method <code>property()</code> must take no argument and be declared as <code>const</code>.</td>
</tr>
<tr>
<td align="left"><code>Property(property_name, &amp;class::property, m)</code></td>
<td align="left">The same as the two-parameter version, but provides a better error message.</td>
</tr>
</tbody>
</table><p><strong>Notes:</strong></p>
<ul>
<li><p>You can use <code class="docutils literal notranslate"><span class="pre">FieldsAre()</span></code> to match any type that supports structured
bindings, such as <code class="docutils literal notranslate"><span class="pre">std::tuple</span></code>, <code class="docutils literal notranslate"><span class="pre">std::pair</span></code>, <code class="docutils literal notranslate"><span class="pre">std::array</span></code>, and aggregate
types. For example:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">my_tuple</span><span class="p">{</span><span class="mi">7</span><span class="p">,</span> <span class="s">&quot;hello world&quot;</span><span class="p">};</span>
<span class="n">EXPECT_THAT</span><span class="p">(</span><span class="n">my_tuple</span><span class="p">,</span> <span class="n">FieldsAre</span><span class="p">(</span><span class="n">Ge</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">HasSubstr</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">)));</span>

<span class="k">struct</span> <span class="n">MyStruct</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>
  <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">greeting</span> <span class="o">=</span> <span class="s">&quot;aloha&quot;</span><span class="p">;</span>
<span class="p">};</span>
<span class="n">MyStruct</span> <span class="n">s</span><span class="p">;</span>
<span class="n">EXPECT_THAT</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">FieldsAre</span><span class="p">(</span><span class="mi">42</span><span class="p">,</span> <span class="s">&quot;aloha&quot;</span><span class="p">));</span>
</pre></div>
</div>
</li>
<li><p>Don’t use <code class="docutils literal notranslate"><span class="pre">Property()</span></code> against member functions that you do not own, because
taking addresses of functions is fragile and generally not part of the
contract of the function.</p></li>
</ul>
</div>
<div class="section" id="matching-the-result-of-a-function-functor-or-callback">
<h2>Matching the Result of a Function, Functor, or Callback<a class="headerlink" href="#matching-the-result-of-a-function-functor-or-callback" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<thead>
<tr>
<th align="left">Matcher</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>ResultOf(f, m)</code></td>
<td align="left"><code>f(argument)</code> matches matcher <code>m</code>, where <code>f</code> is a function or functor.</td>
</tr>
</tbody>
</table></div>
<div class="section" id="pointer-matchers">
<h2>Pointer Matchers<a class="headerlink" href="#pointer-matchers" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<thead>
<tr>
<th align="left">Matcher</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>Address(m)</code></td>
<td align="left">the result of <code>std::addressof(argument)</code> matches <code>m</code>.</td>
</tr>
<tr>
<td align="left"><code>Pointee(m)</code></td>
<td align="left"><code>argument</code> (either a smart pointer or a raw pointer) points to a value that matches matcher <code>m</code>.</td>
</tr>
<tr>
<td align="left"><code>Pointer(m)</code></td>
<td align="left"><code>argument</code> (either a smart pointer or a raw pointer) contains a pointer that matches <code>m</code>. <code>m</code> will match against the raw pointer regardless of the type of <code>argument</code>.</td>
</tr>
<tr>
<td align="left"><code>WhenDynamicCastTo&lt;T&gt;(m)</code></td>
<td align="left">when <code>argument</code> is passed through <code>dynamic_cast&lt;T&gt;()</code>, it matches matcher <code>m</code>.</td>
</tr>
</tbody>
</table></div>
<div class="section" id="multi-argument-matchers-multiargmatchers">
<h2>Multi-argument Matchers {#MultiArgMatchers}<a class="headerlink" href="#multi-argument-matchers-multiargmatchers" title="Permalink to this headline">¶</a></h2>
<p>Technically, all matchers match a <em>single</em> value. A “multi-argument” matcher is
just one that matches a <em>tuple</em>. The following matchers can be used to match a
tuple <code class="docutils literal notranslate"><span class="pre">(x,</span> <span class="pre">y)</span></code>:</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="left">Matcher</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>Eq()</code></td>
<td align="left"><code>x == y</code></td>
</tr>
<tr>
<td align="left"><code>Ge()</code></td>
<td align="left"><code>x &gt;= y</code></td>
</tr>
<tr>
<td align="left"><code>Gt()</code></td>
<td align="left"><code>x &gt; y</code></td>
</tr>
<tr>
<td align="left"><code>Le()</code></td>
<td align="left"><code>x &lt;= y</code></td>
</tr>
<tr>
<td align="left"><code>Lt()</code></td>
<td align="left"><code>x &lt; y</code></td>
</tr>
<tr>
<td align="left"><code>Ne()</code></td>
<td align="left"><code>x != y</code></td>
</tr>
</tbody>
</table><p>You can use the following selectors to pick a subset of the arguments (or
reorder them) to participate in the matching:</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="left">Matcher</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>AllArgs(m)</code></td>
<td align="left">Equivalent to <code>m</code>. Useful as syntactic sugar in <code>.With(AllArgs(m))</code>.</td>
</tr>
<tr>
<td align="left"><code>Args&lt;N1, N2, ..., Nk&gt;(m)</code></td>
<td align="left">The tuple of the <code>k</code> selected (using 0-based indices) arguments matches <code>m</code>, e.g. <code>Args&lt;1, 2&gt;(Eq())</code>.</td>
</tr>
</tbody>
</table></div>
<div class="section" id="composite-matchers">
<h2>Composite Matchers<a class="headerlink" href="#composite-matchers" title="Permalink to this headline">¶</a></h2>
<p>You can make a matcher from one or more other matchers:</p>
<table border="1" class="docutils">
<thead>
<tr>
<th align="left">Matcher</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>AllOf(m1, m2, ..., mn)</code></td>
<td align="left"><code>argument</code> matches all of the matchers <code>m1</code> to <code>mn</code>.</td>
</tr>
<tr>
<td align="left"><code>AllOfArray({m0, m1, ..., mn})</code>, <code>AllOfArray(a_container)</code>, <code>AllOfArray(begin, end)</code>, <code>AllOfArray(array)</code>, or <code>AllOfArray(array, count)</code></td>
<td align="left">The same as <code>AllOf()</code> except that the matchers come from an initializer list, STL-style container, iterator range, or C-style array.</td>
</tr>
<tr>
<td align="left"><code>AnyOf(m1, m2, ..., mn)</code></td>
<td align="left"><code>argument</code> matches at least one of the matchers <code>m1</code> to <code>mn</code>.</td>
</tr>
<tr>
<td align="left"><code>AnyOfArray({m0, m1, ..., mn})</code>, <code>AnyOfArray(a_container)</code>, <code>AnyOfArray(begin, end)</code>, <code>AnyOfArray(array)</code>, or <code>AnyOfArray(array, count)</code></td>
<td align="left">The same as <code>AnyOf()</code> except that the matchers come from an initializer list, STL-style container, iterator range, or C-style array.</td>
</tr>
<tr>
<td align="left"><code>Not(m)</code></td>
<td align="left"><code>argument</code> doesn't match matcher <code>m</code>.</td>
</tr>
<tr>
<td align="left"><code>Conditional(cond, m1, m2)</code></td>
<td align="left">Matches matcher <code>m1</code> if <code>cond</code> evaluates to true, else matches <code>m2</code>.</td>
</tr>
</tbody>
</table></div>
<div class="section" id="adapters-for-matchers">
<h2>Adapters for Matchers<a class="headerlink" href="#adapters-for-matchers" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<thead>
<tr>
<th align="left">Matcher</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>MatcherCast&lt;T&gt;(m)</code></td>
<td align="left">casts matcher <code>m</code> to type <code>Matcher&lt;T&gt;</code>.</td>
</tr>
<tr>
<td align="left"><code>SafeMatcherCast&lt;T&gt;(m)</code></td>
<td align="left"><a href="../gmock_cook_book.md#SafeMatcherCast">safely casts</a> matcher <code>m</code> to type <code>Matcher&lt;T&gt;</code>.</td>
</tr>
<tr>
<td align="left"><code>Truly(predicate)</code></td>
<td align="left"><code>predicate(argument)</code> returns something considered by C++ to be true, where <code>predicate</code> is a function or functor.</td>
</tr>
</tbody>
</table><p><code class="docutils literal notranslate"><span class="pre">AddressSatisfies(callback)</span></code> and <code class="docutils literal notranslate"><span class="pre">Truly(callback)</span></code> take ownership of <code class="docutils literal notranslate"><span class="pre">callback</span></code>,
which must be a permanent callback.</p>
</div>
<div class="section" id="using-matchers-as-predicates-matchersaspredicatescheat">
<h2>Using Matchers as Predicates {#MatchersAsPredicatesCheat}<a class="headerlink" href="#using-matchers-as-predicates-matchersaspredicatescheat" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<thead>
<tr>
<th align="left">Matcher</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>Matches(m)(value)</code></td>
<td align="left">evaluates to <code>true</code> if <code>value</code> matches <code>m</code>. You can use <code>Matches(m)</code> alone as a unary functor.</td>
</tr>
<tr>
<td align="left"><code>ExplainMatchResult(m, value, result_listener)</code></td>
<td align="left">evaluates to <code>true</code> if <code>value</code> matches <code>m</code>, explaining the result to <code>result_listener</code>.</td>
</tr>
<tr>
<td align="left"><code>Value(value, m)</code></td>
<td align="left">evaluates to <code>true</code> if <code>value</code> matches <code>m</code>.</td>
</tr>
</tbody>
</table></div>
<div class="section" id="defining-matchers">
<h2>Defining Matchers<a class="headerlink" href="#defining-matchers" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<thead>
<tr>
<th align="left">Macro</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>MATCHER(IsEven, "") { return (arg % 2) == 0; }</code></td>
<td align="left">Defines a matcher <code>IsEven()</code> to match an even number.</td>
</tr>
<tr>
<td align="left"><code>MATCHER_P(IsDivisibleBy, n, "") { *result_listener &lt;&lt; "where the remainder is " &lt;&lt; (arg % n); return (arg % n) == 0; }</code></td>
<td align="left">Defines a matcher <code>IsDivisibleBy(n)</code> to match a number divisible by <code>n</code>.</td>
</tr>
<tr>
<td align="left"><code>MATCHER_P2(IsBetween, a, b, absl::StrCat(negation ? "isn't" : "is", " between ", PrintToString(a), " and ", PrintToString(b))) { return a &lt;= arg &amp;&amp; arg &lt;= b; }</code></td>
<td align="left">Defines a matcher <code>IsBetween(a, b)</code> to match a value in the range [<code>a</code>, <code>b</code>].</td>
</tr>
</tbody>
</table><p><strong>Notes:</strong></p>
<ol>
<li><p>The <code class="docutils literal notranslate"><span class="pre">MATCHER*</span></code> macros cannot be used inside a function or class.</p></li>
<li><p>The matcher body must be <em>purely functional</em> (i.e. it cannot have any side
effect, and the result must not depend on anything other than the value
being matched and the matcher parameters).</p></li>
<li><p>You can use <code class="docutils literal notranslate"><span class="pre">PrintToString(x)</span></code> to convert a value <code class="docutils literal notranslate"><span class="pre">x</span></code> of any type to a
string.</p></li>
<li><p>You can use <code class="docutils literal notranslate"><span class="pre">ExplainMatchResult()</span></code> in a custom matcher to wrap another
matcher, for example:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">MATCHER_P</span><span class="p">(</span><span class="n">NestedPropertyMatches</span><span class="p">,</span> <span class="n">matcher</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="n">ExplainMatchResult</span><span class="p">(</span><span class="n">matcher</span><span class="p">,</span> <span class="n">arg</span><span class="p">.</span><span class="n">nested</span><span class="p">().</span><span class="n">property</span><span class="p">(),</span> <span class="n">result_listener</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ol>
</div>
</div>


                        
                    </div>
                </div>
            </div>
        </div>
    </div>    


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../../../',
            VERSION:'1.0.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
    <script type="text/javascript" src="../../../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../../../_static/clipboard.min.js"></script>
    <script type="text/javascript" src="../../../../../_static/copybutton.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script type="text/javascript" src="../../../../../_static/js/theme.js"></script>
  
    <div class="footer" role="contentinfo">
        <div class="container">
            &#169; Copyright bladedisc-dev@list.alibaba-inc.com.
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.3.2.
        </div>
    </div>  

</body>
</html>